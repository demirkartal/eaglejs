/**
 * EagleJS.
 *
 * @version   0.6.2
 * @copyright 2020-2021 Cem Demirkartal
 * @license   MIT
 * @see       {@link https://github.com/eagleirons/eaglejs GitHub}
 * @augments  Array<DOMItem>
 */
class EagleJS extends Array{constructor(e=null,t=document){if(super(),null!==e)if("string"==typeof e){if(!/<.+>/.test(e))return new EagleJS(t).querySelectorAll(e);{const t=(new DOMParser).parseFromString(e,"text/html");this.push(...t.body.childNodes)}}else Array.isArray(e)?this.push(...e):this.push(e)}static isDOMItem(e){return Boolean(e)&&Boolean(e.addEventListener)}addClass(...e){return this.forEach((t=>{"classList"in t&&t.classList.add(...e)})),this}after(...e){const t=[];e.forEach((e=>{"string"==typeof e?t.push(document.createTextNode(e)):t.push(e)}));let r=!0;return this.slice().reverse().forEach((e=>{if("parentNode"in e&&null!==e.parentNode){const n=e.parentNode,s=e.nextSibling;t.forEach((e=>{n.insertBefore(r?e:e.cloneNode(!0),s)})),r=!1}})),this}append(...e){const t=[];e.forEach((e=>{"string"==typeof e?t.push(document.createTextNode(e)):t.push(e)}));let r=!0;return this.slice().reverse().forEach((e=>{"querySelector"in e&&(t.forEach((t=>{e.appendChild(r?t:t.cloneNode(!0))})),r=!1)})),this}attr(e,t){if(void 0!==t)return this.forEach((r=>{"setAttribute"in r&&r.setAttribute(e,t)})),this;let r=null;return this.some((t=>"getAttribute"in t&&(r=t.getAttribute(e),!0))),r}before(...e){const t=[];e.forEach((e=>{"string"==typeof e?t.push(document.createTextNode(e)):t.push(e)}));let r=!0;return this.slice().reverse().forEach((e=>{if("parentNode"in e&&null!==e.parentNode){const n=e.parentNode;t.forEach((t=>{n.insertBefore(r?t:t.cloneNode(!0),e)})),r=!1}})),this}children(e=null){const t=new EagleJS;return this.forEach((e=>{"children"in e&&t.push(...e.children)})),null!==e?t.filter(e):t}clone(e=!1){const t=new EagleJS;return this.forEach((r=>{"cloneNode"in r&&t.push(r.cloneNode(e))})),t}closest(e){const t=new EagleJS;return this.forEach((r=>{if("closest"in r){const n=r.closest(e);null!==n&&t.push(n)}})),t}concat(...e){return new EagleJS(super.concat(...e))}contents(){const e=new EagleJS;return this.forEach((t=>{"childNodes"in t&&e.push(...t.childNodes)})),e}data(e,t){if(void 0!==e){const r=e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));if(void 0!==t)return this.forEach((e=>{"dataset"in e&&(e.dataset[r]=t)})),this;let n;return this.some((e=>"dataset"in e&&(n=e.dataset[r],!0))),n}let r={};return this.some((e=>"dataset"in e&&(r=e.dataset,!0))),r}empty(){return this.forEach((e=>{if("firstChild"in e)for(;null!==e.firstChild;)e.removeChild(e.firstChild)})),this}filter(e,t){return"string"==typeof e?this.filter((t=>"matches"in t&&t.matches(e))):"function"==typeof e?super.filter(e,t):Array.isArray(e)?this.filter((t=>e.includes(t))):this.filter((t=>t===e))}hasClass(e){return this.some((t=>"classList"in t&&t.classList.contains(e)))}html(e){if(void 0!==e)return this.forEach((t=>{"innerHTML"in t&&(t.innerHTML=e)})),this;let t="";return this.some((e=>"innerHTML"in e&&(t=e.innerHTML,!0))),t}is(e){return"string"==typeof e?this.some((t=>"matches"in t&&t.matches(e))):Array.isArray(e)?this.some((t=>e.includes(t))):this.includes(e)}next(e=null){const t=new EagleJS;return this.forEach((e=>{"nextElementSibling"in e&&null!==e.nextElementSibling&&t.push(e.nextElementSibling)})),null!==e?t.filter(e):t}not(e){return"string"==typeof e?this.filter((t=>"matches"in t&&!t.matches(e))):Array.isArray(e)?this.filter((t=>!e.includes(t))):this.filter((t=>t!==e))}off(e,t,r=!1){return this.forEach((n=>{n.removeEventListener(e,t,r)})),this}on(e,t,r=!1){return this.forEach((n=>{n.addEventListener(e,t,r)})),this}parent(e=null){const t=new EagleJS;return this.forEach((e=>{"parentNode"in e&&null!==e.parentNode&&t.push(e.parentNode)})),null!==e?t.filter(e):t}prepend(...e){const t=[];e.forEach((e=>{"string"==typeof e?t.push(document.createTextNode(e)):t.push(e)}));let r=!0;return this.slice().reverse().forEach((e=>{if("querySelector"in e){const n=e.firstChild;t.forEach((t=>{e.insertBefore(r?t:t.cloneNode(!0),n)})),r=!1}})),this}prev(e=null){const t=new EagleJS;return this.forEach((e=>{"previousElementSibling"in e&&null!==e.previousElementSibling&&t.push(e.previousElementSibling)})),null!==e?t.filter(e):t}push(...e){return super.push(...e.filter((e=>EagleJS.isDOMItem(e)&&!this.includes(e))))}querySelector(e){const t=new EagleJS;return this.forEach((r=>{if("querySelector"in r){const n=r.querySelector(e);null!==n&&t.push(n)}})),t}querySelectorAll(e){const t=new EagleJS;return this.forEach((r=>{"querySelectorAll"in r&&t.push(...r.querySelectorAll(e))})),t}ready(e){return this.forEach((t=>{"readyState"in t&&("loading"===t.readyState?t.addEventListener("DOMContentLoaded",e):setTimeout(e))})),this}remove(){return this.forEach((e=>{"parentNode"in e&&null!==e.parentNode&&e.parentNode.removeChild(e)})),this}removeAttr(...e){return this.forEach((t=>{"removeAttribute"in t&&e.forEach((e=>{t.removeAttribute(e)}))})),this}removeClass(...e){return this.forEach((t=>{"classList"in t&&t.classList.remove(...e)})),this}replaceWith(...e){return this.before(...e).remove()}siblings(e=null){const t=new EagleJS;return this.forEach((e=>{"parentNode"in e&&null!==e.parentNode&&[...e.parentNode.children].forEach((r=>{r!==e&&t.push(r)}))})),null!==e?t.filter(e):t}text(e){if(void 0!==e)return this.forEach((t=>{"textContent"in t&&(t.textContent=e)})),this;let t=null;return this.some((e=>"textContent"in e&&(t=e.textContent,!0))),t}toggleClass(e,t){return this.forEach((r=>{"classList"in r&&r.classList.toggle(e,t)})),this}trigger(e,t=null){const r=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});return this.forEach((e=>{e.dispatchEvent(r)})),this}unshift(...e){return super.unshift(...e.filter((e=>EagleJS.isDOMItem(e)&&!this.includes(e))))}}const EagleJSProxy=(e=null,t=document)=>new EagleJS(e,t);export{EagleJS,EagleJSProxy};